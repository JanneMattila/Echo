function addMessage(n){console.log(n);const i=document.getElementById("block"),t=i.content.cloneNode(!0);t.querySelectorAll("text")[0].textContent=n;echoElement.insertBefore(t,echoElement.firstChild)}function updateTitle(){document.title=originalTitle+(isFocus||unreadMessages===0?"":`: ${unreadMessages}`)}function copyToClipboard(n,t){let r=document.getElementById(t);console.log(r.innerText);let i=document.createElement("textarea");i.innerHTML=r.innerText;document.body.appendChild(i);i.select();try{document.execCommand("copy")}catch(u){console.error(u)}document.body.removeChild(i);n.innerHTML="📝";setTimeout(function(){n.innerHTML="📋"},300)}function selectElement(n){selectedElement=n}function showHelp(){document.getElementById("helpOpen").style.display="none";document.getElementById("helpClose").style.display="";document.getElementById("help").style.display=""}function hideHelp(){document.getElementById("helpOpen").style.display="";document.getElementById("helpClose").style.display="none";document.getElementById("help").style.display="none"}function clearLog(n){console.log("clearing log");echoElement.innerHTML="";updateTitle();n.innerHTML="⟲";setTimeout(function(){n.innerHTML="⟳"},300)}function changeTheme(){let n=localStorage.getItem("theme");n=n==null||n==="light"?"dark":"light";localStorage.setItem("theme",n);document.getElementsByTagName("html")[0].className=n;document.body.classList.remove("dark");document.body.classList.remove("light");document.body.classList.add(n)}let echoElement=document.getElementById("echo"),selectedElement=null;let protocol=new signalR.JsonHubProtocol,hubRoute="Echo",connection=(new signalR.HubConnectionBuilder).withUrl(hubRoute).withAutomaticReconnect().withHubProtocol(protocol).build();const originalTitle=document.title;let isFocus=!0,unreadMessages=0;window.addEventListener("focus",()=>{isFocus=!0,unreadMessages=0,updateTitle()});window.addEventListener("blur",()=>{isFocus=!1});connection.on("echo",function(n){try{let t="Date received: "+(new Date).toLocaleTimeString();t+="\n"+n.request+"\n";for(const i in n.headers)t+=i+": "+n.headers[i]+"\n";t+="\n"+n.body;addMessage(t)}catch(t){addMessage(JSON.stringify(t));addMessage(JSON.stringify(n))}isFocus||unreadMessages++;updateTitle()});connection.onclose(function(n){n?addMessage("Connection closed with error: "+n):addMessage("Disconnected")});connection.start().then(function(){}).catch(function(n){addMessage(n)});document.addEventListener("keyup",n=>{if(n.key==="Escape")hideHelp();else if(n.key==="Backspace"||n.key==="Delete"){if(selectedElement!=null)try{selectedElement.remove()}catch(t){console.log(t)}selectedElement=null}});const startTheme=localStorage.getItem("theme");startTheme!=null&&(console.log(startTheme),document.getElementsByTagName("html")[0].className=startTheme,document.body.classList.add(startTheme));