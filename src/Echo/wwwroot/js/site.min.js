function addMessage(n){console.log(n);let t=document.createElement("pre");t.innerText=n;echoElement.insertBefore(t,echoElement.firstChild)}let echoElement=document.getElementById("echo");let protocol=new signalR.JsonHubProtocol,hubRoute="Echo",connection=(new signalR.HubConnectionBuilder).configureLogging(signalR.LogLevel.Trace).withUrl(hubRoute).withHubProtocol(protocol).build();connection.on("echo",function(n){let t="Date received: "+(new Date).toLocaleTimeString();t+="\n"+n.request;t+="\n\n"+n.headers;t+="\n"+n.body;addMessage(t)});connection.onclose(function(n){n?addMessage("Connection closed with error: "+n):addMessage("Disconnected")});connection.start().then(function(){}).catch(function(n){addMessage(n)});